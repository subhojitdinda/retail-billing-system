<!DOCTYPE html>
<html>
<head>
    <script src="https://unpkg.com/html5-qrcode@2.3.9/html5-qrcode.min.js"></script>

    <title>Retail Billing System</title>
    {% if session.get('user_id') %}
        {% set theme = theme if theme else 'light' %}
    {% endif %}

    {% if theme == 'dark' %}
        <link rel="stylesheet" href="/static/css/dark.css">
    {% else %}
        <link rel="stylesheet" href="/static/css/style.css">
    {% endif %}
</head>
<body>

<div class="topbar">
    <span>
        User: {{ session.get('username') }} |
        Role: {{ session.get('role') }}
    </span>
    <div>
        <a href="/toggle-theme" class="theme-btn">Toggle Theme</a>
        <a href="/logout" class="theme-btn" style="background:#dc2626;">Logout</a>
    </div>
</div>

<div class="sidebar">
    <h2>Retail System</h2>

    <!-- ================= ADMIN ================= -->
    {% if session.get('role') == 'Admin' %}
        <a href="/dashboard/admin">ğŸ“Š Dashboard</a>
        <a href="/admin/roles">ğŸ§© Manage Roles</a>
        <a href="/admin/users">ğŸ‘¤ Manage Users</a>
        <a href="/admin/gst">ğŸ’° Manage GST</a>
        <a href="/admin/products">ğŸ“¦ Manage Products</a>
        <a href="/customers">ğŸ§¾ Manage Customers</a>
        <a href="/reports/sales">ğŸ“ˆ Sales Reports</a>
    {% endif %}

    <!-- ================= CASHIER ================= -->
    {% if session.get('role') == 'Cashier' %}
        <a href="/dashboard/cashier">ğŸ  Dashboard</a>
        <a href="/billing">ğŸ§¾ New Bill</a>
        <a href="/billing/history">ğŸ“œ Bill History</a>
    {% endif %}

    <!-- ================= INVENTORY MANAGER ================= -->
    {% if session.get('role') == 'Inventory Manager' %}
        <a href="/dashboard/inventory">ğŸ  Dashboard</a>

        <!-- Full Product Control (Same as Admin) -->
        <a href="/inventory/products">ğŸ“¦ Manage Products</a>

        <!-- QR Management -->
        <a href="/inventory/qr">ğŸ”³ Inventory QR</a>
    {% endif %}
</div>

<div class="main">
    {% block content %}{% endblock %}
</div>

</body>
</html>
